<script>
function MisHrBecomeEmployee_lookupmanagelist(){
	var val = "";
	var hideVal ="";
	$(".MisHrBecomeEmployeelist").find("input[type='checkbox']").each(function(){ 
		if($(this).attr("checked")=='checked'){
			var result= DWZ.jsonEval($(this).attr('value'));
			hideVal += ',' +result.id;
			val += ","+result.name;
		}
	});
	if(isNullorEmpty(val) && isNullorEmpty(hideVal)){
		val = val.substring(1);
		hideVal = hideVal.substring(1);
		var html = '<input type="hidden" name="userobjStr" value="'+hideVal+'"/>'+val;
		$("#userobjStr1").html(html);
		$.pdialog.closeCurrent();
	}else{
		alertMsg.error("请选择人员");
	}
}

function changeorganization(obj){
	var $box=$.pdialog.getCurrent();
	$val = $(obj).val();
	if($val=='name'){
		$box.find("input[name='keyword']").attr("placeholder","搜索姓名");
	}
	if($val=='mis_system_department-name'){
		$box.find("input[name='keyword']").attr("placeholder","搜索部门");
	}
	if($val=='duty-name'){
		$box.find("input[name='keyword']").attr("placeholder","搜索职位");
	}
	if($val=='all'){
		$box.find("input[name='keyword']").attr("placeholder","搜索员工姓名,部门,职位,职务");
	}
}
</script>

<!--  <form id="pagerForm" action="__URL__/lookupmanage" method="post">
	<input type="hidden" name="pageNum" value="1" />
	<input type="hidden" name="orderField" value="{$order}" />
	<input type="hidden" name="orderDirection" value="{$sort}" />
</form>
<div class="panelBar">
	<form rel="pagerForm" onsubmit="return divSearch(this, 'misFileManagerGetDeptBox');" action="__URL__/lookupmanage" method="post">
		<input type="hidden" name="jump" value="1">
		<input type="hidden" name="deptid" value="{$deptid}">
		<input type="hidden" name="parentid" value="{$parentid}">
		<input type="hidden" name="step" value="{$step}">
		<div class="searchBar">
		<table class="searchContent">
			<tr>
				<td class="tml_select_option_left">
					<select class="combox searchby"  onchange="changeorganization(this)"   name="searchby" >
						 <option value="all" <if condition="$searchby eq 'all'">selected="selected"</if>>全部</option>
						 <option value="name" <if condition="$searchby eq 'name'">selected="selected"</if>>姓名</option>
						 <option value="mis_system_department-name" <if condition="$searchby eq 'mis_system_department-name'">selected="selected"</if>>部门</option>
						  <option value="duty-name" <if condition="$searchby eq 'duty-name'">selected="selected"</if>>职位</option>
					</select>
				</td>
				<td class="tml_select_option_center">
					<input type="text" <if condition="$placeholder">placeholder="{$placeholder}"<else/>placeholder="搜索员工姓名,部门,职位"</if>  class="keyword" name="keyword"  value="{$keyword}" />
				</td>
				<td class="tml_select_option_right">
					<button class="xySearch" type="submit">{$Think.lang.subsearch}</button>
				</td>
				<td>
				<button class="xyAdvancedSearch" type="button" multLookup="userid" warn="请选择用户">选择带回</button>
				</td>
			</tr>
		</table>
		</div>
	</form>
</div>
<div>
	<table class="table" width="99%" layoutH="146">
		<thead>
			<tr>
				<th width="10"><input type="checkbox"  class="checkboxCtrl" group="userid" /></th>
				<th>员工姓名</th>
				<th>部门</th>
				<th>职级</th>
				<th>查找带回</th>
			</tr>
		</thead>
		<tbody  class="MisHrBecomeEmployeelist">
			<volist id="vo" name="list">
				<tr>
					<td><input type="checkbox" name="userid" value="{ id:'{$vo.userid}', name:'{$vo.name}'}"/></td>
					<td>{$vo['name']}</td>
					<td>{$vo['deptid']|getFieldBy='id','name','mis_system_department'}</td>
					<td>{$vo['dutyid']|getFieldBy='id','name','duty'}</td>
					<td>
						<a class="btnSelect"  href="javascript:$.bringBack({ userid:'{$vo.id}', name:'{$vo.name}'})" title="查找带回">选择</a>
					</td>
				</tr>
			</volist>
		</tbody>
	</table>
	<div class="panelBar panelPageBar">
		<div class="pages">
			<span>共{$totalCount}条</span>
		</div>
		<div class="pagination" rel="misFileManagerGetDeptBox" targetType="dialog" totalCount="{$totalCount}" numPerPage="{$numPerPage}" pageNumShown="10" currentPage="{$currentPage}"></div>
	</div>
</div>  -->
 <script type="text/javascript">
/* function changeorganization(obj){
	var $box=$.pdialog.getCurrent();
	$val = $(obj).val();
	if($val=='name'){
		$box.find("input[name='keyword']").attr("placeholder","搜索姓名");
	}
	if($val=='mis_system_department-name'){
		$box.find("input[name='keyword']").attr("placeholder","搜索部门");
	}
	if($val=='duty-name'){
		$box.find("input[name='keyword']").attr("placeholder","搜索职位");
	}
	if($val=='all'){
		$box.find("input[name='keyword']").attr("placeholder","搜索员工姓名,部门,职位,职务");
	}
} */
</script>
 <form id="pagerForm" action="__URL__/lookupmanage" method="post">
	<input type="hidden" name="pageNum" value="1" />
	<input type="hidden" name="orderField" value="{$order}" />
	<input type="hidden" name="orderDirection" value="{$sort}" />
</form>
<div class="panelBar" >
	<form rel="pagerForm" onsubmit="return divSearch(this, 'misFileManagerGetDeptBox');" action="__URL__/lookupmanage" method="post">
		<input type="hidden" name="jump" value="1">
		<input type="hidden" name="deptid" value="{$deptid}">
		<input type="hidden" name="parentid" value="{$parentid}">
		<input type="hidden" name="companyid" value="{$companyid}">
		<input type="hidden" name="step" value="{$step}">
		<div class="searchBar">
		<table class="searchContent">
			<tr>
				<td class="tml_select_option_left">
					<select class="combox searchby"  onchange="changeorganization(this)"   name="searchby" >
						 <option value="all" <if condition="$searchby eq 'all'">selected="selected"</if>>全部</option>
						 <option value="name" <if condition="$searchby eq 'name'">selected="selected"</if>>姓名</option>
						 <option value="mis_system_department-name" <if condition="$searchby eq 'mis_system_department-name'">selected="selected"</if>>部门</option>
						  <option value="duty-name" <if condition="$searchby eq 'duty-name'">selected="selected"</if>>职位</option>
					</select>
				</td>
				<td class="tml_select_option_center">
					<input type="text" <if condition="$placeholder">placeholder="{$placeholder}"<else/>placeholder="搜索员工姓名,部门,职位"</if>  class="keyword" name="keyword"  value="{$keyword}" />
				</td>
				<td class="tml_select_option_right">
					<button class="xySearch" type="submit">{$Think.lang.subsearch}</button>
				</td>
				<td>
				<button class="xyAdvancedSearch" type="button" multLookup="userid" warn="请选择用户">选择带回</button>
				</td>
			</tr>
		</table><!-- 
		<table class="searchContent">
				<tr>
					<td class="tml_select_option_left">
						<select class="combox searchby"  onchange="changeorganization(this)"   name="searchby" >
						 <option value="all" <if condition="$searchby eq 'all'">selected="selected"</if>>全部</option>
						 <option value="name" <if condition="$searchby eq 'name'">selected="selected"</if>>姓名</option>
						 <option value="mis_system_department-name" <if condition="$searchby eq 'mis_system_department-name'">selected="selected"</if>>部门</option>
						  <option value="duty-name" <if condition="$searchby eq 'duty-name'">selected="selected"</if>>职位</option>
					</select>
					</td>
					<td>
						<input type="text" <if condition="$placeholder">placeholder="{$placeholder}"<else/>placeholder="搜索员工姓名,部门,职位"</if>  class="keyword" name="keyword"  value="{$keyword}" />
					</td>
					<td>
						<button class="xySearch" type="submit">{$Think.lang.subsearch}</button>
					</td>
					<td>
					<button class="xyAdvancedSearch" type="button" multLookup="userid" warn="请选择用户">选择带回</button>
					</td>
				</tr>
			</table> -->
		</div>
	</form>
</div>
<div>
	<table class="table" width="99%" layoutH="117">
		<thead>
			<tr>
				<th width="20"><input type="checkbox" class="checkboxCtrl" group="userid" /></th>
				<th>员工编号</th>
				<th>员工姓名</th>
				<th>部门</th>
				<th>职级</th>
				<th>入职时间</th>
				<th>转正时间	</th>
				<th>查找带回</th>
			</tr>
		</thead>
		<tbody class="tbodylist">
			<volist id="vo" name="list">
				<tr>
					<td><input type="checkbox" name="userid" value="{ userid:'{$vo.id}', name:'{$vo.name}'}" /></td>
					<td>{$vo['orderno']}</td>
					<td>{$vo['name']}</td>
					<td>{$vo['deptid']|getFieldBy='id','name','mis_system_department'}</td>
					<td>{$vo['dutyid']|getFieldBy='id','name','duty'}</td>
					<td>{$vo['indate']|transTime}</td>
					<td>{$vo['transferdate']|transTime}</td>
					<td>
						<a class="btnSelect"  href="javascript:$.bringBack({ userid:'{$vo.id}', name:'{$vo.name}'})" title="查找带回">选择</a>
					</td>
				</tr>
			</volist>
		</tbody>
	</table>
	<div class="panelBar panelPageBar">
		<div class="pages">
			<span>共{$totalCount}条</span>
		</div>
		<div class="pagination" rel="misFileManagerGetDeptBox" targetType="dialog" totalCount="{$totalCount}" numPerPage="{$numPerPage}" pageNumShown="10" currentPage="{$currentPage}"></div>
	</div>
</div>  