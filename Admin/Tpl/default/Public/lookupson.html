<script>//单选增删function soninsert(obj){	var value=$(obj).val();		var v = value.split("|"); 	if($(obj).attr("checked")){ 		var url = "__URL__/lookupinsert"; 	}else{ 		var url = "__URL__/lookupsondel"; 	} 	var box = $.pdialog.getCurrent(); 	var lookupJson = $("input[name='lookupJson']",box).val(); 	var jsondt = $("input[name='jsondt']",box).val();	$.ajax({		type:"POST",		url:url,		data:{			masid:v[2],			model:'{$modelname}',			lookupJson:lookupJson,			subjson:v[0],			subtable:v[1], 			jsondt:jsondt,		},	})   }//全选 增删function choisealldata(obj){	var checkname = $(obj).attr("group");	var box = $.pdialog.getCurrent();	var checkobj = $("input[type='checkbox']."+checkname)	if($(obj).attr("checked")){ 		var url = "__URL__/lookupsonallinsert"; 		checkobj.attr('checked','checked'); 	}else{ 		var url = "__URL__/lookupsonalldel"; 		checkobj.attr('checked',false); 	}	var data = new Array();	checkobj.each(function(){		data.push($(this).val());	})	var lookupJson = $("input[name='lookupJson']",box).val();	var jsondt = $("input[name='jsondt']",box).val();	 $.ajax({		type:"POST",		url:url,		data:{			masid:'{$masid}',			model:'{$modelname}',			lookupJson:lookupJson,			data:data, 			jsondt:jsondt,		},	})  }function bringBackDataTable(json){	//$.parseJSON(json);	//console.log(json);	$.bringBack(json);} $(function(){	 var box = $.pdialog.getCurrent();	 	console.log(box);	$("#thinkphp_page a").each(function(){		$(this).attr('rel','lookupfordatatable2_sons');		$(this).attr('target','ajax');	});	 var subtable = '{$subtable}';	$("input[type='checkbox'][group='"+subtable+"']").attr("checked","checked");	$("input[type='checkbox'][group='"+subtable+"']").click();	$("input[type='checkbox'][group='"+subtable+"']").attr("checked","checked"); });  function changehighlight(obj){		var box = $.pdialog.getCurrent();		$(obj).addClass('select').siblings().removeClass('select');		var model = $("#lookupfordatatable2_sons input[name='model']").val();		var masid = $(obj).attr("masid");		var subtable = $(obj).attr("subtable");		var lookupJson = $("input[name='lookupJson']").val();		$("#lookupfordatatable4_sons").ajaxUrl({			type:"POST",url:"__URL__/lookupson",data:{"model":model,"masid":masid,"subtable":subtable,"lookupJson":lookupJson},callback:function(){			$("#MisSystemDataAccessModelQuoteBOX").find("[layoutH]").layoutH();}});	}	$("a[target=ajax2]").on("click",function(event){		var $this=$(this);		//灰色按钮不可点		if($this.hasClass("disabled")){			return false;		}		var rel=$this.attr("rel");ldolasf;		if(rel){		var $rel=$("#"+rel);		$rel.loadUrl($this.attr("href"),{},function(){		$rel.find("[layoutH]").layoutH();		$(".dialogContent button.close").on("click",function(){		$.pdialog.closeCurrent();		return false;});		});}		event.preventDefault();	});	</script><form method="post" id="pagerForm" action="__URL__/lookupsoninsert" rel="lookupfordatatable2_sons" class="pageForm required-validate" onsubmit="return validateCallback(this, bringBackDataTable)"><input type="hidden" name="callbackType" value="closeCurrent" /><input type="hidden" name="masid" value="{$masid}" /><input type="hidden" name="model" value="{$modelname}" /><input type="hidden" name="lookupJson" value='{$lookupJson}' />	<input type='hidden' name="jsondt" value="{$jsondt}">	<div class="" currentIndex="0" eventType="click" layoutH="325" >	<div class="">		<div class=" lookup_list_nav">            <volist name="dt" id="vi">                <a  href="javascript:" subtable="{$key}" masid="{$masid}"  onclick="changehighlight(this);"<if condition="$key eq $subtable">class="select"<else/>class=""</if>>{$vi.title}</a>            </volist>		</div>	</div>	<div class="" id="lookupfordatatable4_sons">	   <include file="./Tpl/default/Public/lookupsonextend.html" />	   	</div></div><div id="thinkphp_page" class="page_number_btn_lay">    {$page}</div>	<div style="text-align: center;"><button class="tml_formBar_btn tml_formBar_btn_blue" type="submit" value="">提交</button></div></form>