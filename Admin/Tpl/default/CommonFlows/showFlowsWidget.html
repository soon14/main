<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="__PUBLIC__/Js/flow/html5.js" type="text/javascript"></script>
<![endif]-->
<script type="text/javascript">
	$(function() {
		$LAB.script("__PUBLIC__/Js/flow/jquery.jsPlumb-1.3.14-all-min.js")
		.script("__PUBLIC__/Js/flow/bootstrap.js")
		.script("__PUBLIC__/Js/flow/workflow.js")
	    .wait(function(){
	    	// 等待所有script加载完再执行这个代码块
	    	var data = {$data};
			pr.fnInit("prcslist", data, nodeClick = function() {
			}, labelClass = 'aLabel', labelFunction = function(e) {
				var label = e.getElement();//获得label元素
				var lineIndex = $(label).index('.aLabel');//获取线的索引
				label.style.display = 'none';
				return (lineIndex + 1).toString();//只能返回字符串
			});
	    });
	});
	function changeEditFlows(flowid,md){
		$.pdialog.reload(TP_APP + '/CommonFlows/lookupCustomFlow',{dialogId:"ShowFlows",data:{flowid:flowid,md:md,edit:1}});
	}
	function changeEditFlowsw(flowid,md){
		$.pdialog.reload(TP_APP +'/CommonFlows/lookupFixFlow',{dialogId:"ShowFlows",data:{flowid:flowid,md:md,edit:1}});
	}
</script>
<div class="pageContent">
	<div class="pageFormContent" layoutH="58">
		<div class="tml-row">
			<div class="processgraph" style="min-height: 350px;" oncontextmenu="return false;">
				<div class="wf_explanation">
					<span>固定流程图</span><span style="color: red;font-size: 13;">（如果此流程不能满足，可以进行流程自定义）</span>
				</div>
				<div id="prcslist" style="position: relative;"></div>
			</div>
		</div>
	</div>
	<div class="formBar">
		<ul>
			<li><button type="button" class="tml-btn tml-btn-blue" onclick="changeEditFlows({$flowid},'__MODULE__');">自定义</button></li>
			<li><button type="button" class="close tml-btn">{$Think.lang.close}</button></li>
		</ul>
	</div>
</div>